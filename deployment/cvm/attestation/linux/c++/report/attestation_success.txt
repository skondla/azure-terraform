adminuser@cc-cvm-sd-1:~/attestation/attestation-app-linux$ sudo ./AttestationClient
Initiating Guest Attestation
Level: Info Tag: AttestatationClientLib ParseURL:519:Attestation URL info - protocol {https}, domain {sharedeus2.eus2.attest.azure.net}
Level: Info Tag: AttestatationClientLib Attest:99:Attestation URL - https://sharedeus2.eus2.attest.azure.net/attest/AzureGuest?api-version=2020-10-01
Level: Info Tag: AttestatationClientLib GetOSInfo:600:Retrieving OS Info
Level: Info Tag: AttestatationClientLib GetIsolationInfo:670:Retrieving Isolation Info
Level: Debug Tag: AttestatationClientLib GetVCekCert:63:VCek cert received from IMDS successfully
Level: Info Tag: AttestatationClientLib DecryptMaaToken:369:Successfully Decrypted inner key
Level: Info Tag: AttestatationClientLib Attest:164:Successfully attested and decrypted response.
Guest attestation passed successfully!! Printing the attestation token in next line....
eyJhbGciOiJSUzI1NiIsImprdSI6Imh0dHBzOi8vc2hhcmVkZXVzMi5ldXMyLmF0dGVzdC5henVyZS5uZXQvY2VydHMiLCJraWQiOiJKMHBBUGRmWFhIcVdXaW1nckg4NTN3TUlkaDUvZkxlMXo2dVNYWVBYQ2EwPSIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2NTk1MTAzNTEsImlhdCI6MTY1OTQ4MTU1MSwiaXNzIjoiaHR0cHM6Ly9zaGFyZWRldXMyLmV1czIuYXR0ZXN0LmF6dXJlLm5ldCIsImp0aSI6IjVhMDNmMzM0MTMxNDc4NWM0YmMyZjRiY2YzM2ZhYTdiMTY4ZTlhODVlYTE4NDdlNjE4OTVmMTVkMmZiZTg4NzIiLCJuYmYiOjE2NTk0ODE1NTEsInNlY3VyZWJvb3QiOnRydWUsIngtbXMtYXR0ZXN0YXRpb24tdHlwZSI6ImF6dXJldm0iLCJ4LW1zLWF6dXJldm0tYXR0ZXN0YXRpb24tcHJvdG9jb2wtdmVyIjoiMi4wIiwieC1tcy1henVyZXZtLWF0dGVzdGVkLXBjcnMiOlswLDEsMiwzLDQsNSw2LDddLCJ4LW1zLWF6dXJldm0tYm9vdGRlYnVnLWVuYWJsZWQiOmZhbHNlLCJ4LW1zLWF6dXJldm0tZGJ2YWxpZGF0ZWQiOnRydWUsIngtbXMtYXp1cmV2bS1kYnh2YWxpZGF0ZWQiOnRydWUsIngtbXMtYXp1cmV2bS1kZWJ1Z2dlcnNkaXNhYmxlZCI6dHJ1ZSwieC1tcy1henVyZXZtLWRlZmF1bHQtc2VjdXJlYm9vdGtleXN2YWxpZGF0ZWQiOnRydWUsIngtbXMtYXp1cmV2bS1lbGFtLWVuYWJsZWQiOmZhbHNlLCJ4LW1zLWF6dXJldm0tZmxpZ2h0c2lnbmluZy1lbmFibGVkIjpmYWxzZSwieC1tcy1henVyZXZtLWh2Y2ktcG9saWN5IjowLCJ4LW1zLWF6dXJldm0taHlwZXJ2aXNvcmRlYnVnLWVuYWJsZWQiOmZhbHNlLCJ4LW1zLWF6dXJldm0taXMtd2luZG93cyI6ZmFsc2UsIngtbXMtYXp1cmV2bS1rZXJuZWxkZWJ1Zy1lbmFibGVkIjpmYWxzZSwieC1tcy1henVyZXZtLW9zYnVpbGQiOiJOb3RBcHBsaWNhdGlvbiIsIngtbXMtYXp1cmV2bS1vc2Rpc3RybyI6IlVidW50dSIsIngtbXMtYXp1cmV2bS1vc3R5cGUiOiJMaW51eCIsIngtbXMtYXp1cmV2bS1vc3ZlcnNpb24tbWFqb3IiOjIwLCJ4LW1zLWF6dXJldm0tb3N2ZXJzaW9uLW1pbm9yIjo0LCJ4LW1zLWF6dXJldm0tc2lnbmluZ2Rpc2FibGVkIjp0cnVlLCJ4LW1zLWF6dXJldm0tdGVzdHNpZ25pbmctZW5hYmxlZCI6ZmFsc2UsIngtbXMtYXp1cmV2bS12bWlkIjoiNzE5RkFDRjMtQkMwQS00MkVGLUJGMkItQUQxNTY4Q0Y3QjA5IiwieC1tcy1pc29sYXRpb24tdGVlIjp7IngtbXMtYXR0ZXN0YXRpb24tdHlwZSI6InNldnNucHZtIiwieC1tcy1jb21wbGlhbmNlLXN0YXR1cyI6ImF6dXJlLWNvbXBsaWFudC1jdm0iLCJ4LW1zLXJ1bnRpbWUiOnsia2V5cyI6W3siZSI6IkFRQUIiLCJrZXlfb3BzIjpbImVuY3J5cHQiXSwia2lkIjoiSENMQWtQdWIiLCJrdHkiOiJSU0EiLCJuIjoidF9nT0RRQUJJX3llcDZwaFlTQzhfT1BfdmdTWExIeWs3MUZMdFZiekxBTXE1NVd6Ym5pQjhpODQwOGt3QnB3NEkwSGgyZ2QtalJ2TlFmRWhqNTZpSDUycDc4ajlnT2ZIeWpRcTdKWUdZSGNSOTRIT3pzN24tVXFnUHZVcjlxcGhrYXNzM3pMckR5QVQ2T1pxeTRMcXdZZlRidkZ2OUliTVhDUlhIZ0VYM3JtYmtLNUF2TFZsS1M2dDhzTUc2SDdkR1JhRUs2QzBnaG1zQjdxVzBlTi1YbE00eEVJdC1wVzgxM2xGMExncDVjYXRsaEZIRjdVeW9PdzFnUnF0TldHV1c4OVU1NWNWREg0SnQ5RHNfUFJtc0Z6WER5SFIzWDdRYk1FZWgtcnMya3B3ZUc5RkRPQTJFLWlBbVZsYXVtcmZrWGFGbVl0cHUySnBuYjFSaHJZOWpRIn1dLCJ2bS1jb25maWd1cmF0aW9uIjp7ImNvbnNvbGUtZW5hYmxlZCI6dHJ1ZSwiY3VycmVudC10aW1lIjoxNjU5NDgxNTQ4LCJzZWN1cmUtYm9vdCI6dHJ1ZSwidHBtLWVuYWJsZWQiOnRydWUsInZtVW5pcXVlSWQiOiI3MTlGQUNGMy1CQzBBLTQyRUYtQkYyQi1BRDE1NjhDRjdCMDkifX0sIngtbXMtc2V2c25wdm0tYXV0aG9ya2V5ZGlnZXN0IjoiMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwIiwieC1tcy1zZXZzbnB2bS1ib290bG9hZGVyLXN2biI6MiwieC1tcy1zZXZzbnB2bS1mYW1pbHlJZCI6IjAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwIiwieC1tcy1zZXZzbnB2bS1ndWVzdHN2biI6MiwieC1tcy1zZXZzbnB2bS1ob3N0ZGF0YSI6IjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAiLCJ4LW1zLXNldnNucHZtLWlka2V5ZGlnZXN0IjoiNTdlMjI5ZTBmZmU1ZmE5MmQwZmFkZGZmNmNhZTBlNjFjOTI2ZmM5ZWY5YWZkMjBhOGI4Y2ZjZjcxMjlkYjkzMzhjYmU1YmYzZjY5ODc3MzNhMmJmNjVkMDZkYzM4ZmMxIiwieC1tcy1zZXZzbnB2bS1pbWFnZUlkIjoiMDIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAiLCJ4LW1zLXNldnNucHZtLWlzLWRlYnVnZ2FibGUiOmZhbHNlLCJ4LW1zLXNldnNucHZtLWxhdW5jaG1lYXN1cmVtZW50IjoiNTY3N2YxZGU4NzI4OWU3YWQyYzdlOTljODA1ZDA0NjhiMWE5Y2NkODNmMGQyNDVhZmE1MjQyZDQwNWRhNGQ1NzI1ODUyZjhjNjU1MDU2NDg3MGU1ZjMyMDZkZmIxODQxIiwieC1tcy1zZXZzbnB2bS1taWNyb2NvZGUtc3ZuIjo5MywieC1tcy1zZXZzbnB2bS1taWdyYXRpb24tYWxsb3dlZCI6ZmFsc2UsIngtbXMtc2V2c25wdm0tcmVwb3J0ZGF0YSI6Ijk0MDc1Njg5MGUwOTk2NTUzNmY0YzMyMWM1MzE1NDI0M2M5M2Q2ZWFkNTFlMmI1M2EzMDUyNzZiODI2YzQ5ZTkwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwIiwieC1tcy1zZXZzbnB2bS1yZXBvcnRpZCI6IjA1ZWVjN2I2ODg5ZTMwZmY4MTFhMzkyYTcyZGRlZWVmMDgxOTFhNTI2ZTI3NGY2MTAxNmFlMTdkOWUwMzUxNGMiLCJ4LW1zLXNldnNucHZtLXNtdC1hbGxvd2VkIjp0cnVlLCJ4LW1zLXNldnNucHZtLXNucGZ3LXN2biI6NiwieC1tcy1zZXZzbnB2bS10ZWUtc3ZuIjowLCJ4LW1zLXNldnNucHZtLXZtcGwiOjB9LCJ4LW1zLXBvbGljeS1oYXNoIjoid205bUhsdlRVODJlOFVxb095MVlqMUZCUlNOa2ZlOTktNjlJWURxOWVXcyIsIngtbXMtcnVudGltZSI6eyJjbGllbnQtcGF5bG9hZCI6eyJub25jZSI6Ik1USXpOQT09In0sImtleXMiOlt7ImUiOiJBUUFCIiwia2V5X29wcyI6WyJlbmNyeXB0Il0sImtpZCI6IlRwbUVwaGVtZXJhbEVuY3J5cHRpb25LZXkiLCJrdHkiOiJSU0EiLCJuIjoiMlBjWktBQUFSQ1NLcy1nOXRXNWlWN2pPVy0wTkNyM2pwYm9uZEpjUGtJd1luWFJkWVpnM1hWTkZBMzYzVFRDVmpmUklPaWhkV3lYMXMzUkNoUUt1OXZyenBfN1hPendRSU1sVEpBN195bTFQTUgybXJ0NG5jOVhFRVY5eEJISDhHXzZWekEyY05ZUnR3MDhjWXU4ZmhDVllCaVpfTkNJTTdTdWd0Vm5qVU9fdzhpdURQZkpfalhPS2FTcEw4N21Ud0xTQ0xZdHJKbXpTbTdXakkxVWN5c3I5M0Y0UGxSc0I1NzJFMUlqRWlSNDdmNGhnSHBvamRGaDJsczUyc3VhUGw3dTRXd0J5a0JnbDVNbTJ1MHFqU0hYSVE5elVOUlVhXzJzRnNtdHZqWThEczZlOVhyNEdKaUpFZWhIZy1xUXdTNFNfYjVOTm5yc2RDajR6dEFjOU93In1dfSwieC1tcy12ZXIiOiIxLjAifQ.MF855SAIGQ92f5R-ZJGodkg_zeBV_P2SqZBNAy1DuanYooN-JFlVxJqUo9N-0iTxd2C8ixCde_Z1R3zuYwhNGib28yTTyZj64R91ez3aJswaiKJxdk-fL5-ubCRricwex_TGVspQpycNLqxgSNHdmjm6My9ReygcRH9e45noMsQtNnjc2-dppLdpIc51Iu21KdO2zWejukH7NqUDdH5Y3NqU4cQCKY4TogbnaisaindYxix7ep9Pf1-_HdwXiOyEuKoRokM4-_FbbJXY-oYlywLkCJXbCUbsF0eAMPxEthEDkbNKv35hsoQ8YzbJtl3fjL1PO3KyRgmh9VcNDyn3oA
adminuser@cc-cvm-sd-1:~/attestation/attestation-app-linux$


#Next Step 

Copy encoded token to decode from below website. Algorithm: RS256 

to - https://jwt.io/ to decode JWT token 
The payload should look like below 

####################### header #######################

{
  "alg": "RS256",
  "jku": "https://sharedeus2.eus2.attest.azure.net/certs",
  "kid": "J0pAPdfXXHqWWimgrH853wMIdh5/fLe1z6uSXYPXCa0=",
  "typ": "JWT"
}

####################### payload data #######################

{
  "exp": 1659516056,
  "iat": 1659487256,
  "iss": "https://sharedeus2.eus2.attest.azure.net",
  "jti": "d57dc30a02bcbe3f4be9487c1d28131322bfa9d03057245c4e92b6a39bf9446c",
  "nbf": 1659487256,
  "secureboot": true,
  "x-ms-attestation-type": "azurevm",
  "x-ms-azurevm-attestation-protocol-ver": "2.0",
  "x-ms-azurevm-attested-pcrs": [
    0,
    1,
    2,
    3,
    4,
    5,
    6,
    7
  ],
  "x-ms-azurevm-bootdebug-enabled": false,
  "x-ms-azurevm-dbvalidated": true,
  "x-ms-azurevm-dbxvalidated": true,
  "x-ms-azurevm-debuggersdisabled": true,
  "x-ms-azurevm-default-securebootkeysvalidated": true,
  "x-ms-azurevm-elam-enabled": false,
  "x-ms-azurevm-flightsigning-enabled": false,
  "x-ms-azurevm-hvci-policy": 0,
  "x-ms-azurevm-hypervisordebug-enabled": false,
  "x-ms-azurevm-is-windows": false,
  "x-ms-azurevm-kerneldebug-enabled": false,
  "x-ms-azurevm-osbuild": "NotApplication",
  "x-ms-azurevm-osdistro": "Ubuntu",
  "x-ms-azurevm-ostype": "Linux",
  "x-ms-azurevm-osversion-major": 20,
  "x-ms-azurevm-osversion-minor": 4,
  "x-ms-azurevm-signingdisabled": true,
  "x-ms-azurevm-testsigning-enabled": false,
  "x-ms-azurevm-vmid": "719FACF3-BC0A-42EF-BF2B-AD1568CF7B09",
  "x-ms-isolation-tee": {
    "x-ms-attestation-type": "sevsnpvm",
    "x-ms-compliance-status": "azure-compliant-cvm",
    "x-ms-runtime": {
      "keys": [
        {
          "e": "AQAB",
          "key_ops": [
            "encrypt"
          ],
          "kid": "HCLAkPub",
          "kty": "RSA",
          "n": "t_gODQABI_yep6phYSC8_OP_vgSXLHyk71FLtVbzLAMq55WzbniB8i8408kwBpw4I0Hh2gd-jRvNQfEhj56iH52p78j9gOfHyjQq7JYGYHcR94HOzs7n-UqgPvUr9qphkass3zLrDyAT6OZqy4LqwYfTbvFv9IbMXCRXHgEX3rmbkK5AvLVlKS6t8sMG6H7dGRaEK6C0ghmsB7qW0eN-XlM4xEIt-pW813lF0Lgp5catlhFHF7UyoOw1gRqtNWGWW89U55cVDH4Jt9Ds_PRmsFzXDyHR3X7QbMEeh-rs2kpweG9FDOA2E-iAmVlaumrfkXaFmYtpu2Jpnb1RhrY9jQ"
        }
      ],
      "vm-configuration": {
        "console-enabled": true,
        "current-time": 1659485761,
        "secure-boot": true,
        "tpm-enabled": true,
        "vmUniqueId": "719FACF3-BC0A-42EF-BF2B-AD1568CF7B09"
      }
    },
    "x-ms-sevsnpvm-authorkeydigest": "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "x-ms-sevsnpvm-bootloader-svn": 2,
    "x-ms-sevsnpvm-familyId": "01000000000000000000000000000000",
    "x-ms-sevsnpvm-guestsvn": 2,
    "x-ms-sevsnpvm-hostdata": "0000000000000000000000000000000000000000000000000000000000000000",
    "x-ms-sevsnpvm-idkeydigest": "57e229e0ffe5fa92d0faddff6cae0e61c926fc9ef9afd20a8b8cfcf7129db9338cbe5bf3f6987733a2bf65d06dc38fc1",
    "x-ms-sevsnpvm-imageId": "02000000000000000000000000000000",
    "x-ms-sevsnpvm-is-debuggable": false,
    "x-ms-sevsnpvm-launchmeasurement": "5677f1de87289e7ad2c7e99c805d0468b1a9ccd83f0d245afa5242d405da4d5725852f8c6550564870e5f3206dfb1841",
    "x-ms-sevsnpvm-microcode-svn": 93,
    "x-ms-sevsnpvm-migration-allowed": false,
    "x-ms-sevsnpvm-reportdata": "aacbf2d7f13685de470b6a7fd3bd6b7ad96b9837c52913e8e9ffb93ebb3a63850000000000000000000000000000000000000000000000000000000000000000",
    "x-ms-sevsnpvm-reportid": "05eec7b6889e30ff811a392a72ddeeef08191a526e274f61016ae17d9e03514c",
    "x-ms-sevsnpvm-smt-allowed": true,
    "x-ms-sevsnpvm-snpfw-svn": 6,
    "x-ms-sevsnpvm-tee-svn": 0,
    "x-ms-sevsnpvm-vmpl": 0
  },
  "x-ms-policy-hash": "wm9mHlvTU82e8UqoOy1Yj1FBRSNkfe99-69IYDq9eWs",
  "x-ms-runtime": {
    "client-payload": {
      "nonce": "MTIzNA=="
    },
    "keys": [
      {
        "e": "AQAB",
        "key_ops": [
          "encrypt"
        ],
        "kid": "TpmEphemeralEncryptionKey",
        "kty": "RSA",
        "n": "2PcZKAAARCSKs-g9tW5iV7jOW-0NCr3jpbondJcPkIwYnXRdYZg3XVNFA363TTCVjfRIOihdWyX1s3RChQKu9vrzp_7XOzwQIMlTJA7_ym1PMH2mrt4nc9XEEV9xBHH8G_6VzA2cNYRtw08cYu8fhCVYBiZ_NCIM7SugtVnjUO_w8iuDPfJ_jXOKaSpL87mTwLSCLYtrJmzSm7WjI1Ucysr93F4PlRsB572E1IjEiR47f4hgHpojdFh2ls52suaPl7u4WwBykBgl5Mm2u0qjSHXIQ9zUNRUa_2sFsmtvjY8Ds6e9Xr4GJiJEehHg-qQwS4S_b5NNnrsdCj4ztAc9Ow"
      }
    ]
  },
  "x-ms-ver": "1.0"
}

#Verify Signature 

RSASHA256(
  base64UrlEncode(header) + "." +
  base64UrlEncode(payload),
  ,
)
